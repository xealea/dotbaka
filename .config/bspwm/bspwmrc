# init dotbaka
. "${HOME}/.dotbaka"

# Make Null Sxhkd
pgrep -x sxhkd > /dev/null || sxhkd &

# Workspace
bspc monitor -d I II III IV V VI VII VIII IX X

bspc config border_width         "$W"
bspc config window_gap           "$G"
bspc config top_padding          "$T"
bspc config bottom_padding       "$B"
bspc config right_padding        "$R"
bspc config left_padding         "$L"
bspc config normal_border_color "$OUTER"
bspc config active_border_color "$ACTIVE"
bspc config focused_border_color "$INNER"

# Monocle borderless
[ "$MONOCLE" = "ON" ] && bspc config single_monocle true

# Rule window
bspc rule -a Gimp,Chromium,Screenkey,Gpick,Telegram-Desktop,Pcmanfm,Org.gnome.Nautilus,Thunar,Onboard,Audacious,Firefox:Places,Viewnior,Nm-connection-editor \
    desktop='^8' \
    state=floating \
    follow=on \
    focus=on

bspc rule -a Conky,stalonetray \
    state=floating \
    manage=off

bspc rule -a xfce4-power-manager \
    state=floating \
    follow=on \
    focus=on

# Rule terminal
if [ "$TERMINAL" = "floating" ]; then
    bspc rule -a "$TERM" \
        state=floating \
        follow=on \
        focus=on
elif [ "$TERMINAL" = "full" ]; then
    bspc rule -a "$TERM" \
        follow=on \
        focus=on
fi

# Kill Processes
killall sxhkd xfce4-power-manager polybar nautilus

# Set wallpaper
bash ${HOME}/.fehbg

# Launch Xsettingsd Daemon
mpd ${HOME}/.mpd/mpd.conf &

# Launch Polkit agent
if ! pgrep -x "xfce-polkit" > /dev/null
then
    /usr/lib/xfce-polkit/xfce-polkit &
fi

# Launch Compositor
if [ $COMPOSITOR = "ON" ]
then
    picom &
fi

# Launch Keybind
sxhkd &

# Launch Bar
if [ $BAR = "polybar" ]
then
    bash ~/.config/polybar/launch &
elif [ $BAR = "tint2" ]
then
    bash ~/.config/tint2/citrus/launch --$OPTION &
fi

# Set Cursor
xsetroot -cursor_name left_ptr &

# Launch Pulseaudio in Background
pulseaudio --daemonize=no --exit-idle-time=-1 &
